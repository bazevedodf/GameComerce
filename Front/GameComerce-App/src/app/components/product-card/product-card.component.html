<div class="card product-card h-100 border-0 shadow-sm">
  <!-- Badge de Desconto -->
  <div class="position-absolute top-0 end-0 m-2">
    <span *ngIf="produto.desconto > 0" class="badge bg-danger fs-6">
      -{{ produto.desconto }}%
    </span>
  </div>

  <!-- Imagem do Produto -->
  <div class="position-relative overflow-hidden">
    <img [src]="produto.imagem" 
         [alt]="produto.nome"
         class="card-img-top product-image">
    
    <!-- Overlay de Ações -->
    <div class="product-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center">
      <button class="btn btn-warning btn-sm fw-bold" (click)="compraRapida()">
        <i class="bi bi-lightning-charge me-1"></i>
        Comprar Agora
      </button>
    </div>
  </div>

  <!-- Corpo do Card -->
  <div class="card-body d-flex flex-column">
    <!-- Categoria -->
    <div class="mb-2">
      <span class="badge bg-dark text-light fs-7">{{ produto.categoria }}</span>
      <span class="badge bg-secondary text-light fs-7 ms-1">{{ produto.plataforma }}</span>
    </div>

    <!-- Nome do Produto -->
    <h5 class="card-title fs-6 fw-bold text-dark mb-2 line-clamp-2">
      {{ produto.nome }}
    </h5>

    <!-- Descrição -->
    <p class="card-text text-muted small mb-3 flex-grow-1 line-clamp-2">
      {{ produto.descricao }}
    </p>

    <!-- Entrega -->
    <div class="d-flex align-items-center mb-3">
      <i class="bi bi-lightning text-success me-1"></i>
      <small class="text-success fw-bold">{{ produto.entrega }}</small>
    </div>

    <!-- Rating -->
    <div class="d-flex align-items-center mb-3">
      <div class="text-warning me-2">
        <i class="bi bi-star-fill" *ngFor="let star of getStarsArray(produto.avaliacao)"></i>
        <i class="bi bi-star" *ngFor="let star of getEmptyStarsArray(produto.avaliacao)"></i>
      </div>
      <small class="text-muted">({{ produto.totalAvaliacoes }})</small>
    </div>

    <!-- Preço -->
    <div class="mt-auto">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
          <span *ngIf="produto.precoOriginal > produto.preco" 
                class="text-muted text-decoration-line-through me-2">
            R$ {{ produto.precoOriginal.toFixed(2) }}
          </span>
          <span class="fs-5 fw-bold text-dark">
            R$ {{ produto.preco.toFixed(2) }}
          </span>
        </div>
      </div>

      <!-- Botão de Ação -->
      <button class="btn btn-primary w-100 fw-bold py-2"
              [disabled]="!produto.ativo"
              (click)="adicionarAoCarrinho()">
        <i class="bi bi-cart-plus me-2"></i>
        {{ produto.ativo ? 'Adicionar ao Carrinho' : 'Fora de Estoque' }}
      </button>
    </div>
  </div>
</div>